language: node_js
node_js:
  - "0.10"
notifications:
  email:
    recipients:
      - emerson@emersonveenstra.net
    on_success: always
    on_failure: always
  webhooks:
    urls:
      - http://webhooks.testing2.emersonveenstra.net/webhook
    on_failure: always
    on_success: always
env:
  global:
    - secure: hahPiGA5cuaAskTcKIs5M8ZurgWABtz5oxl2WrO6GJiN8/7acKjTs66gUj3dK8kPt2STh27b/DK4ZRRZ22GWBS2tnh2USIOvxR5P35T4QUSh7k2N4MRhaPSjKm7NDb0nKD09MPqzuh3yb1RJGPZL2vmCCvv91XhELmd/3NxzBNk=
    - secure: AyuwjpHL1LEbW1t3HXPosEVwWeBfMCZQR+UPsIA11UO5ehhS7DfBkxRlE5egw7r2daqWVYHVaBGSvDErIZl/LROMfpQNE9rP0HkpkKOXyl8NkKoxbqaKA4rIjRcipAdbzGDkLNvvp2pynAM10x41bs6umODs/usuFX3EWVgoiNo=
addons:
  sauce_connect: true
  hosts:
    - testing2.emersonveenstra.net
before_install:
  - npm install -g forever
  - npm install -g grunt-cli
before_script:
  - forever start app.js
  - sleep 5
  - forever logs 0
  - ping -c 1 testing2.emersonveenstra.net
  - curl localhost:5672
after_success:
  - forever stopall
after_failure:
  - curl localhost:5672
  - forever logs 0
